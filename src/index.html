<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta name="description" content="">
    <meta name="keywords" content="">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta content="telephone=no" name="format-detection">


    <script type="text/javascript">
        window.page_begin = +new Date();
    </script>
</head>
<body>

<script type="text/javascript" src="js/require.js"></script>
<script type="text/javascript">
    require.config({
        "shim": {
            underscore: {
                exports: '_'
            },
            "backbone.joint": {
                deps: ["backbone"]
            },
            backbone: {
                deps: ["underscore", "zepto", "deferred", "zepto.plugins"],
                exports: "Backbone"
            },
            iscroll: {
                exports: "IScroll"
            },
            deferred: {
                deps: ["zepto"]
            },
            "zepto.plugins": {
                deps: ["zepto"]
            }
        },
        paths: {
           // qqmap: 'http://map.qq.com/api/js?v=2.exp&key=KK6BZ-KX634-2V2U7-D6LIS-4VDHT-RPBAX'
        },
        // urlArgs: Math.random(),
        baseUrl: './js/'
    })(['view/main', 'util/cinema', 'util/login', 'util/style', 'viewmodel/moviedata'], function (MainView, CinemaDe, login, Style, MovieData) {


        var cssUrl = './css/style' + CinemaDe.styleAbbr +'.css';
        Style(cssUrl);

        window.title = CinemaDe.title;
        window.debug = true;
        window.wxconfig = {
        };
        window.__defineGetter__('v', function () {
            return main._subviews['#main'][0] || main._subviews['#main'];
        });

        window.require.onError = function (err) {
            console.log(err);
        };
        window.main = new MainView({el: document.body});
        main.render();
    });
</script>
</body>
</html>